{"version":3,"sources":["client.ts","ShoppingList.tsx","ListConfig.tsx","Menu.tsx","Navbar.tsx","AppPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["BASE_API","process","postEvent","event","fetch","method","body","JSON","stringify","headers","useStyles","makeStyles","theme","listItemChecked","background","palette","secondary","light","textDecoration","listItem","primary","ShoppingList","props","listItems","listId","setListId","useEffect","console","log","id","Box","p","align","display","component","Link","to","List","map","item","ListItem","onClick","checkListItem","payload","list_id","product_id","type","checked","handleClick","key","className","clsx","button","ListItemIcon","ListItemText","name","chipContainer","overflowX","Menu","products","useState","activeCategories","setCategories","categories","Array","from","Set","category","justifyContent","Chip","icon","label","color","includes","updatedCategories","filter","c","handleCategoryClick","clickable","product","length","selected","root","width","maxWidth","backgroundColor","paper","nested","paddingLeft","spacing","classes","React","open","setOpen","dialogOpen","setDialogOpen","newListTitle","setNewListTitle","handleDialogClose","aria-label","Collapse","in","timeout","unmountOnExit","disablePadding","shoppingLists","list","Divider","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","value","fullWidth","onChange","target","DialogActions","Button","trim","menuButton","marginRight","title","flexGrow","Navbar","AppBar","position","Toolbar","IconButton","navigate","edge","Typography","variant","AppPage","path","createMuiTheme","green","orange","responsiveFontSizes","App","Map","listData","setListItems","listening","setListening","setShoppingLists","setProducts","eventSource","EventSource","onmessage","a","parsedData","parse","data","jsonResponse","Response","window","caches","cache","put","catch","e","Object","entries","onerror","error","match","json","jsonData","get","then","res","newProducts","String","product_name","some","i","ThemeProvider","newItems","updatedMap","set","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","document","getElementById","URL","href","origin","addEventListener","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6e48c624.chunk.js","sourcesContent":["import { IApiProduct } from \"./interfaces\"\n\nconst BASE_API = process.env.REACT_APP_BASE_URL\n\nexport const postEvent = (event: any) => {\n    fetch(`${BASE_API}/events`, {\n        method: 'POST',\n        body: JSON.stringify(event),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })\n}\n\nexport const createEventSource = () => new EventSource(`${BASE_API}/list-data`)\n\nexport const getShoppingLists = () => fetch(`${BASE_API}/lists`).then((res)=> res.json())\n\nexport const getProducts = () : Promise<{ data: IApiProduct[] }> => fetch(`${BASE_API}/products`).then((res)=> res.json())\n","import React, { useEffect } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IShoppingItem } from './interfaces'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport { postEvent } from './client'\n\ninterface ShoppingListProps extends RouteComponentProps {\n  listItems: IShoppingItem[];\n  listId: string;\n  id?: string\n  setListId: (id: string) => void\n  checkListItem: (id: string) => void\n}\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!,\n      textDecoration: 'line-through'\n    },\n    listItem: {\n      \"&:hover, &.Mui-focusVisible\": { background: theme.palette.primary.light! }\n    }\n  })\n});\n\nexport default function ShoppingList(props: ShoppingListProps) {\n  const { listItems,listId,setListId } = props\n  const { listItem, listItemChecked } = useStyles()\n\n  useEffect(() => {\n    //check if list id from route is the same as current list id,\n    //if not then change it to the currently selected\n    console.log(props.id)\n    if(props.id && props.id !== listId) setListId(props.id)\n  },[listId,setListId])\n\n  const handleClick =  (item: IShoppingItem) => {\n    props.checkListItem(item.id)\n    const payload = {\n      list_id: props.listId,\n      product_id: item.id,\n      type: ''\n    }\n    if (item.checked) {\n      payload.type = 'item_unchecked'\n    } else {\n      payload.type = 'item_checked'\n    }\n    return postEvent(payload);\n  }\n\n  return (\n    <Box >\n      <Box p={2}>\n        <MuiLink align='center' display='block' component={Link} to='edit'>Bearbeiten</MuiLink>\n      </Box>\n      <List>\n        {\n          listItems.map((item) => {\n            return (\n              <ListItem onClick={() => handleClick(item)} key={item.id} className={clsx(listItem, item.checked ? listItemChecked: '')} button>\n                <ListItemIcon>\n                  <LocalCafeIcon />\n                </ListItemIcon>\n                <ListItemText primary={item.name} />\n              </ListItem>\n            )\n          })\n        }\n      </List>\n    </Box>\n  )\n}","import React, { useEffect, useState } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IShoppingItem, IProduct } from './interfaces'\nimport { postEvent, getProducts } from './client'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport CheckIcon from '@material-ui/icons/Check'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport Chip from '@material-ui/core/Chip'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\n\ninterface MenuProps extends RouteComponentProps {\n  listItems: IShoppingItem[],\n  listId: string,\n  products: IProduct[]\n}\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!\n    },\n    listItem: {\n      \"&:hover, &.Mui-focusVisible\": { background: theme.palette.primary.light! }\n    },\n    chipContainer: {\n      overflowX: 'auto',\n    }\n  })\n});\n\nexport default function Menu(props: MenuProps) {\n  const { listItems, products } = props\n  const { listItem, listItemChecked, chipContainer } = useStyles()\n  const [activeCategories, setCategories] = useState<string[]>([])\n\n  const handleClick = (product: IProduct) => {\n    const payload = {\n      list_id: props.listId,\n      product_id: product.id,\n      type: ''\n    }\n    if (product.selected) {\n      payload.type = 'item_removed'\n    } else {\n      payload.type = 'item_added'\n    }\n    return postEvent(payload);\n  }\n  \n  const handleCategoryClick = (category : string) => {\n    console.log(category)\n    const updatedCategories = activeCategories.includes(category) ? activeCategories.filter(c => c !== category) : [...activeCategories, category]\n    console.log(updatedCategories)\n    return setCategories(updatedCategories)\n  }\n  const categories = Array.from(new Set(products.map(p => p.category)))\n\n  return (\n    <Box>\n      <Box p={2}>\n        <MuiLink align='center' display='block' component={Link} to={`/list/${props.listId}`}>Fertig</MuiLink>\n      </Box>\n      <Box p={1} display='flex' justifyContent='flex-start' className={chipContainer}>\n        {categories.map(category => \n         <Chip key={category}\n          icon={<LocalCafeIcon />}\n          label={category}\n          color={activeCategories.includes(category) ? 'primary' : 'default'}\n          onClick={() => handleCategoryClick(category)}\n          clickable\n         />\n      )}\n      </Box>\n     <List>\n        {\n          products\n          .filter((product: IProduct) => activeCategories.length > 0 ? activeCategories.includes(product.category) : true )\n          .map((product: IProduct) => {\n            return (\n              <ListItem onClick={() => handleClick(product)} className={clsx(listItem, product.selected ? listItemChecked: '')} key={product.id} button>\n                <ListItemIcon>\n                  <LocalCafeIcon />\n                </ListItemIcon>\n                <ListItemText primary={product.name} />{product.selected && <CheckIcon />}\n              </ListItem>\n            )\n          })\n        }\n      </List>\n    </Box>\n  )\n}\n\n","import React, { useEffect } from 'react'\nimport Box from '@material-ui/core/Box'\nimport ListItem from '@material-ui/core/ListItem'\nimport List from '@material-ui/core/List'\nimport { RouteComponentProps } from \"@reach/router\"\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport AddIcon from '@material-ui/icons/Add'\nimport ListIcon from '@material-ui/icons/List'\nimport { ListItemText } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { IShoppingList } from './interfaces'\nimport { getShoppingLists } from './client'\nimport { Link } from '@reach/router'\nimport { postEvent } from './client'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n}));\n\ninterface MenuProps extends RouteComponentProps  {\n  shoppingLists: IShoppingList[],\n}\n\nexport default function Menu(props: MenuProps) {\n\nconst classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n  const [dialogOpen, setDialogOpen] = React.useState(false);\n  const [newListTitle, setNewListTitle] = React.useState('')\n\n  const handleDialogOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleDialogClose = () => {\n    setDialogOpen(false);\n  };\n\n  const handleClick = () => {\n    setOpen(!open);\n  };\n  \n  const handleNewList = () => {\n    console.log(newListTitle)\n    handleDialogClose()\n    if(!newListTitle.trim()) return;\n    setNewListTitle('')\n    const payload = {\n      type: 'list_added',\n      name: newListTitle,\n    }\n    return postEvent(payload);\n  }\n\n  return (\n    <Box className={classes.root}>\n      <List component=\"nav\" aria-label=\"main mailbox folders\">\n        <ListItem button>\n          <ListItemIcon>\n            <AddIcon />\n          </ListItemIcon>\n          <ListItemText onClick={handleDialogOpen} primary=\"Neuer Einkaufszettel\" />\n        </ListItem>\n        <ListItem button onClick={handleClick}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Einkaufslisten\" />\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </ListItem>\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\n          <List component=\"div\" disablePadding>\n            {\n            props.shoppingLists.map(list => {\n            return (\n              <ListItem key={list.id} component={Link} to={`/list/${list.id}`} button className={classes.nested}>\n                <ListItemIcon>\n                  <StarBorder />\n                </ListItemIcon>\n                <ListItemText primary={list.name} />\n              </ListItem>\n              )\n            })\n          }\n          </List>\n        </Collapse>\n      </List>\n      <Divider />\n      <List component=\"nav\" aria-label=\"secondary mailbox folders\">\n        <ListItem button>\n          <ListItemText primary=\"Löschen\" />\n        </ListItem>\n      </List>\n      <Dialog open={dialogOpen} onClose={handleDialogClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Neue Liste</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n           Bitte gib den Namen deiner Einkaufsliste ein. \n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            value={newListTitle}\n            label=\"Name\"\n            type=\"name\"\n            fullWidth\n            onChange={(event) => setNewListTitle(event.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDialogClose} color=\"primary\">\n            Zurück \n          </Button>\n          <Button onClick={handleNewList} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  )\n}\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Box from '@material-ui/core/Box'\nimport { navigate } from '@reach/router'\n\nconst useStyles = makeStyles((theme) => ({\n\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function Navbar() {\n  const classes = useStyles()\n\n  return (\n    <Box flexGrow={1} >\n      <AppBar position=\"static\">\n        <Toolbar>\n             <IconButton onClick={() => navigate('/menu')} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" >\n              <MenuIcon />\n             </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Einkauf-App\n          </Typography>\n            <Button color=\"inherit\">Login.</Button>\n        </Toolbar>\n      </AppBar>\n    </Box>\n      )\n} ","import React from 'react'\nimport { Router } from '@reach/router'\nimport ShoppingList from './ShoppingList'\nimport ListConfig from './ListConfig'\nimport Menu from './Menu'\nimport Navbar from './Navbar'\nimport { IShoppingItem, IShoppingList, IProduct } from './interfaces'\n\ninterface AppPageProps {\n    listItems: IShoppingItem[],\n    products: IProduct[],\n    listId: string,\n    setListId: (id: string) => void,\n    shoppingLists: IShoppingList[],\n    checkListItem: (id: string) => void\n}\n\nexport default function AppPage (props: AppPageProps) {\n    return (\n        <>\n          <Navbar />\n          <Router >\n              <ShoppingList listId={props.listId} listItems={props.listItems} checkListItem={props.checkListItem} setListId={props.setListId} path=\"/list/:id\" />\n              <ListConfig products={props.products} listId={props.listId} listItems={props.listItems} path=\"/list/:id/edit\" />\n              <Menu shoppingLists={props.shoppingLists} path=\"/menu\" />\n          </Router>\n        </>\n    )\n}","import React from 'react';\nimport { useEffect, useState } from 'react'\nimport { ThemeProvider, createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\nimport orange from '@material-ui/core/colors/orange'\nimport green from '@material-ui/core/colors/green'\nimport AppPage from './AppPage'\nimport './App.css';\nimport { createEventSource, getShoppingLists, getProducts } from './client';\nimport { IShoppingItem, IShoppingList, IProduct } from './interfaces';\n\nlet theme = createMuiTheme({\n  palette: {\n    primary: green,\n    secondary: orange\n  }\n})\ntheme = responsiveFontSizes(theme)\n\n\nfunction App() {\n  const [listData, setListItems] = useState<Map<string,IShoppingItem[]>>(new Map());\n  const [listening, setListening] = useState(false);\n  const [listId, setListId ] = useState('1')\n  const [shoppingLists, setShoppingLists] = React.useState<IShoppingList[]>([])\n  const [products, setProducts] = useState<IProduct[]>([])\n\n  useEffect(() => {\n    if (!listening) {\n      const eventSource = createEventSource() \n      eventSource.onmessage = async (event) => {\n        const parsedData = JSON.parse(event.data) as any\n        console.log(\"message arrived\")\n        console.log(parsedData)\n        const jsonResponse = new Response(event.data, {\n          headers: {\n            'content-type': 'application/json'\n          }\n        })\n        const cache = await window.caches.open('shoppinglist')\n        await cache.put(`/events/${listId}`, jsonResponse ).catch(e => console.log(e))\n        console.log(\"added to cache !\")\n        const map = new Map(Object.entries(parsedData))\n        setListItems(map);\n      };\n      eventSource.onerror = async (error) => {\n        const data = await window.caches.match(`/events/${listId}`)\n        const jsonData = await data?.json()\n        console.log(\"using cached data:\")\n        console.log(jsonData)\n        const map = new Map(Object.entries(jsonData))\n        setListItems(map);\n      }\n      \n      setListening(true);\n    }\n  }, [listening, listData]);\n\n  const listItems = listData.get(listId) || [] as IShoppingItem[]\n\n  useEffect(() => {\n    getShoppingLists()\n    .then((res) => setShoppingLists(res.data))\n  },[])\n\n  useEffect(() => {\n    getProducts().\n    then(res => {\n      const newProducts: IProduct[] = res.data\n      .map(product => {\n        return ({\n          id: String(product.id),\n          name: product.product_name,\n          category: product.category,\n          selected: listItems.some(i => i.id === `${product.id}`)\n        })\n      })\n\n      setProducts(newProducts)      \n    })\n  },[])\n\n  useEffect(() => {\n    const newProducts: IProduct[] = products \n    .map(product => {\n      return ({\n        id: String(product.id),\n        name: product.name,\n        category: product.category,\n        selected: listItems.some(i => i.id === `${product.id}`)\n      })\n    })\n    setProducts(newProducts)     \n  },[listItems])\n\n  const checkListItem = (id: string) => {\n    const newItems = listItems.map(item => item.id === id ? ({ ...item, checked: !item.checked }) : item)\n    const updatedMap = listData.set(listId,newItems) \n    setListItems(updatedMap)\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <AppPage products={products} shoppingLists={shoppingLists} listId={listId} setListId={setListId} listItems={listItems} checkListItem={checkListItem} />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}