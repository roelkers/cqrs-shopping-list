{"version":3,"sources":["client.ts","atoms.ts","selectors.ts","useListItems.ts","constants.ts","ShoppingList.tsx","ListConfig.tsx","useProducts.ts","useShoppingLists.ts","Menu.tsx","Navbar.tsx","AppPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["BASE_API","process","postEvent","event","fetch","method","body","JSON","stringify","headers","postNewProduct","newProductName","newProductCategory","name","category","productsState","atom","key","default","shoppingListState","listIdState","listDataState","Map","listItemsState","selector","get","id","useListItems","useRecoilState","listData","setListItems","useState","listening","setListening","listId","useRecoilValue","listItems","useEffect","eventSource","EventSource","onmessage","a","parsedData","parse","data","jsonResponse","Response","map","Object","entries","window","caches","open","cache","put","catch","e","console","log","onerror","error","match","json","jsonData","newItems","item","checked","updatedMap","set","CATEGORY_ORDER","useStyles","makeStyles","theme","listItemChecked","background","palette","secondary","light","textDecoration","list","overflow","maxHeight","button","marginTop","listItemText","display","marginLeft","ShoppingList","props","setListId","checkListItem","displayDoneItems","setDisplayDoneItems","Box","p","align","component","Link","to","List","className","slice","filter","sort","b","indexOf","ListItem","onClick","payload","list_id","product_id","type","handleClick","clsx","ListItemIcon","ListItemText","primary","quantity","justifyContent","Button","chipContainer","height","overflowX","ListConfig","activeCategories","setCategories","products","swipeTravelStart","setSwipeTravelStart","increaseQuantity","product","find","decreaseQuantity","categories","Array","from","Set","handleTouchEnd","changedTouches","clientX","handleMouseUp","alignItems","flexDirection","flexWrap","Chip","icon","label","color","includes","updatedCategories","c","handleCategoryClick","clickable","length","selected","some","focusVisibleClassName","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseMove","onMouseUp","useProducts","setProducts","then","res","newProducts","String","product_name","i","useShoppingLists","shoppingLists","setShoppingLists","root","width","maxWidth","backgroundColor","paper","nested","paddingLeft","spacing","isDeleted","dark","Menu","classes","React","setOpen","dialogOpen","setDialogOpen","deleteOpen","setDeleteOpen","newProductOpen","handleNewProductOpen","newListTitle","setNewListTitle","listToDelete","selectListToDelete","setNewProductName","setNewProductCategory","refetchProducts","refetchShoppingLists","handleDialogClose","handleDeleteClose","handleNewList","trim","handleListDelete","handleNewProduct","aria-label","Collapse","in","timeout","unmountOnExit","disablePadding","Divider","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","value","fullWidth","onChange","target","DialogActions","Select","evt","MenuItem","menuButton","marginRight","title","flexGrow","Navbar","AppBar","position","Toolbar","IconButton","navigate","edge","Typography","variant","page","boxSizing","padding","paddingBottom","AppPage","path","createMuiTheme","main","typography","fontFamily","responsiveFontSizes","App","ThemeProvider","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","document","getElementById","URL","href","origin","addEventListener","response","contentType","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.d64702fe.chunk.js","sourcesContent":["import { IApiProduct } from \"./interfaces\"\n\nconst BASE_API = process.env.REACT_APP_BASE_URL\n\nexport const postEvent = (event: any) => {\n    return fetch(`${BASE_API}/events`, {\n        method: 'POST',\n        body: JSON.stringify(event),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })\n}\n\nexport const createEventSource = () => new EventSource(`${BASE_API}/list-data`)\n\nexport const getShoppingLists = () => fetch(`${BASE_API}/lists`).then((res) => res.json())\n\nexport const getProducts = (): Promise<{ data: IApiProduct[] }> => fetch(`${BASE_API}/products`).then((res) => res.json())\n\nexport const postNewProduct = ({ newProductName , newProductCategory } : { newProductName: string, newProductCategory: string }) => fetch(`${BASE_API}/products`,\n    {\n        method: 'POST',\n        body : JSON.stringify({\n            name: newProductName,\n            category: newProductCategory\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })","import { atom } from 'recoil'\nimport { IProduct, IShoppingList, IShoppingItem } from './interfaces';\n\nexport const productsState = atom<IProduct[]>({\n  key: 'products', // unique ID (with respect to other atoms/selectors)\n  default: [], // default value (aka initial value)\n});\n\nexport const shoppingListState = atom<IShoppingList[]>({\n  key: 'shoppingList', // unique ID (with respect to other atoms/selectors)\n  default: [], // default value (aka initial value)\n});\n\nexport const listIdState = atom<string>({\n  key: 'listId', // unique ID (with respect to other atoms/selectors)\n  default: '1', // default value (aka initial value)\n})\n\nexport const listDataState = atom<Map<string,IShoppingItem[]>>({\n  key: 'listData', // unique ID (with respect to other atoms/selectors)\n  default: new Map(), // default value (aka initial value)\n})","import { selector } from 'recoil' \nimport { listIdState, listDataState } from './atoms'\nimport { IShoppingItem } from './interfaces';\n\nexport const listItemsState = selector<IShoppingItem[]>({\n  key: 'listItems', \n  get: ({get} : any) => {\n    const id = get(listIdState);\n    const listData = get(listDataState) \n\n    const items = listData.get(id) || [] as IShoppingItem[]\n    return items;\n  },\n});","import { useRecoilState, useRecoilValue } from \"recoil\";\nimport { useState, useEffect } from \"react\";\nimport { listDataState, listIdState } from \"./atoms\";\nimport { createEventSource } from \"./client\";\nimport { listItemsState } from \"./selectors\";\n\nconst useListItems : () => (id: string) => void = () => {\n  const [listData, setListItems] = useRecoilState(listDataState);\n  const [listening, setListening] = useState(false);\n  const listId = useRecoilValue(listIdState)\n  const listItems = useRecoilValue(listItemsState)\n\n  useEffect(() => {\n    if (!listening) {\n      const eventSource = createEventSource() \n      eventSource.onmessage = async (event) => {\n        const parsedData = JSON.parse(event.data) as any\n        const jsonResponse = new Response(event.data, {\n          headers: {\n            'content-type': 'application/json'\n          }\n        })\n        const map = new Map(Object.entries(parsedData))\n        setListItems(map);\n        //update cache if we have access to it\n        if(window.caches) {\n          const cache = await window.caches.open('shoppinglist')\n          await cache.put(`/events/${listId}`, jsonResponse ).catch(e => console.log(e))\n        }\n      };\n      eventSource.onerror = async (error) => {\n        //use cache if we have access to it\n        if(window.caches) {\n          const data = await window.caches.match(`/events/${listId}`)\n          const jsonData = await data?.json()\n          const map = new Map(Object.entries(jsonData))\n          setListItems(map);\n        }\n      }\n      \n      setListening(true);\n    }\n  }, [listening, listData, listId]);\n\n  const checkListItem = (id: string) => {\n    const newItems = listItems.map(item => item.id === id ? ({ ...item, checked: !item.checked }) : item)\n    const updatedMap = listData.set(listId,newItems) \n    setListItems(updatedMap)\n  }\n\n  return checkListItem \n}\n\nexport default useListItems","\nexport const CATEGORY_ORDER = [\n  'Obst',\n  'Gemüse',\n  'Kühlwaren',\n  'Fleisch',\n  'TK',\n  'Konserven',\n  'Trockenware',\n  'Würzwaren',\n  'Backwaren',\n  'Backzutaten',\n  'Getränke',\n  'Snacks',\n  'Drogerie'\n]","import React, { useEffect, useState } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IShoppingItem } from './interfaces'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport { postEvent } from './client'\nimport { useRecoilState, useRecoilValue } from 'recoil'\nimport { listIdState } from './atoms'\nimport { listItemsState } from './selectors'\nimport useListItems from './useListItems'\nimport { CATEGORY_ORDER } from './constants'\nimport { Button } from '@material-ui/core'\n\ninterface ShoppingListProps extends RouteComponentProps {\n  id?: string\n}\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!,\n      textDecoration: 'line-through'\n    },\n    list: {\n      overflow: 'auto',\n      maxHeight: 'calc(100vh - 140px)'\n    },\n    button: {\n      marginTop: 'auto'\n    },\n    listItemText: {\n      display: 'flex',\n      '& .MuiListItemText-secondary': {\n        marginLeft: '1em'\n      }\n    }\n  })\n});\n\nexport default function ShoppingList(props: ShoppingListProps) {\n  const [listId, setListId] = useRecoilState(listIdState)\n  const listItems = useRecoilValue(listItemsState)\n  const { listItemChecked, list, button, listItemText } = useStyles()\n  const checkListItem = useListItems()\n  const [displayDoneItems, setDisplayDoneItems] = useState(false)\n\n  useEffect(() => {\n    //check if list id from route is the same as current list id,\n    //if not then change it to the currently selected\n    if (props.id && props.id !== listId) setListId(props.id)\n  }, [listId, setListId, props.id])\n\n  const handleClick = (item: IShoppingItem) => {\n    checkListItem(item.id)\n    const payload = {\n      list_id: listId,\n      product_id: item.id,\n      type: ''\n    }\n    if (item.checked) {\n      payload.type = 'item_unchecked'\n    } else {\n      payload.type = 'item_checked'\n    }\n    return postEvent(payload);\n  }\n\n  return (\n    <Box>\n      <Box p={2} >\n        <MuiLink align='center' display='block' component={Link} to='edit'>Bearbeiten</MuiLink>\n      </Box>\n      <List className={list}>\n        {\n          listItems.slice()\n            .filter(item => displayDoneItems ? !item.checked : true)\n            .sort((a, b) =>\n              CATEGORY_ORDER.indexOf(a.category) - CATEGORY_ORDER.indexOf(b.category)\n            )\n            .map((item) => {\n              return (\n                <ListItem onClick={() => handleClick(item)} key={item.id} className={clsx(item.checked ? listItemChecked : '')} >\n                  <ListItemIcon>\n                    <LocalCafeIcon />\n                  </ListItemIcon>\n                  <ListItemText className={listItemText} primary={item.name} secondary={item.quantity} />\n                </ListItem>\n              )\n            })\n        }\n      </List>\n      <Box className={button} display='flex' justifyContent='center'>\n        <Button onClick={() => setDisplayDoneItems(!displayDoneItems)}>\n          {displayDoneItems ? 'Fertige einblenden' : 'Fertige ausblenden'}\n        </Button>\n      </Box>\n    </Box>\n  )\n}","import React, { useState } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IProduct } from './interfaces'\nimport { postEvent } from './client'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport CheckIcon from '@material-ui/icons/Check'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport Chip from '@material-ui/core/Chip'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport { useRecoilValue } from 'recoil'\nimport { productsState, listIdState } from './atoms'\nimport { listItemsState } from './selectors'\nimport { CATEGORY_ORDER } from './constants'\n\ninterface ListConfigProps extends RouteComponentProps { }\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!\n    },\n    chipContainer: {\n      height: '68px',\n      overflowX: 'scroll',\n    },\n    list: {\n      overflow: 'auto',\n      maxHeight: 'calc(100vh - 185px)'\n    },\n    listItemText: {\n      display: 'flex',\n      '& .MuiListItemText-secondary': {\n        marginLeft: '1em'\n      }\n    }\n  })\n});\n\nconst SWIPE_THRESHOLD = 30\n\nexport default function ListConfig(props: ListConfigProps) {\n  const { listItemChecked, chipContainer, list , listItemText } = useStyles()\n  const [activeCategories, setCategories] = useState<string[]>([])\n  const products = useRecoilValue(productsState)\n  const listItems = useRecoilValue(listItemsState)\n  const listId = useRecoilValue(listIdState)\n  const [swipeTravelStart, setSwipeTravelStart] = useState(0)\n\n  // const handleClick = (product: IProduct) => {\n  //   const payload = {\n  //     list_id: listId,\n  //     product_id: product.id,\n  //     type: ''\n  //   }\n  //   const selected = listItems.some(item => item.id === product.id)\n  //   if (selected) {\n  //     payload.type = 'item_removed'\n  //   } else {\n  //     payload.type = 'item_added'\n  //   }\n  //   return postEvent(payload);\n  // }\n\n  const increaseQuantity = (product: IProduct) => {\n    const item = listItems.find(item => item.id === product.id)\n    if (!item) {\n      return postEvent({\n        list_id: listId,\n        product_id: product.id,\n        type: 'item_added'\n      })\n    }\n    return postEvent({\n      list_id: listId,\n      product_id: product.id,\n      type: 'quantity_inc'\n    })\n  }\n\n  const decreaseQuantity = (product: IProduct) => {\n    const item = listItems.find(item => item.id === product.id)\n    if (item?.quantity! == 1) {\n      return postEvent({\n        list_id: listId,\n        product_id: product.id,\n        type: 'item_removed'\n      })\n    }\n    if (item?.quantity! > 1) {\n      return postEvent({\n        list_id: listId,\n        product_id: product.id,\n        type: 'quantity_dec'\n      })\n    }\n  }\n\n  const handleCategoryClick = (category: string) => {\n    const updatedCategories = activeCategories.includes(category) ? activeCategories.filter(c => c !== category) : [category]\n    return setCategories(updatedCategories)\n  }\n  const categories = Array.from(new Set(products.map(p => p.category)))\n  const handleTouchMove = (product: IProduct) => (e: React.TouchEvent<HTMLDivElement>) => {\n  }\n  const handleTouchStart = (product: IProduct) => (e: React.TouchEvent<HTMLDivElement>) => {\n    setSwipeTravelStart(e.changedTouches[0].clientX)\n  }\n  const handleTouchEnd = (product: IProduct) => (e: React.TouchEvent<HTMLDivElement>) => {\n    if (swipeTravelStart - e.changedTouches[0].clientX > SWIPE_THRESHOLD) {\n      decreaseQuantity(product)\n    }\n    if (swipeTravelStart - e.changedTouches[0].clientX < - SWIPE_THRESHOLD) {\n      increaseQuantity(product)\n    }\n  }\n  const handleMouseMove = (product: IProduct) => (e: React.MouseEvent<HTMLDivElement>) => {\n  }\n  const handleMouseDown = (product: IProduct) => (e: React.MouseEvent<HTMLDivElement>) => {\n    setSwipeTravelStart(e.clientX)\n  }\n  const handleMouseUp = (product: IProduct) => (e: React.MouseEvent<HTMLDivElement>) => {\n    if (swipeTravelStart - e.clientX > SWIPE_THRESHOLD) {\n      decreaseQuantity(product)\n    }\n    if (swipeTravelStart - e.clientX < - SWIPE_THRESHOLD) {\n      increaseQuantity(product)\n    }\n  }\n  return (\n    <Box>\n      <Box p={2}>\n        <MuiLink align='center' display='block' component={Link} to={`/list/${listId}`}>Fertig</MuiLink>\n      </Box>\n      <Box p={1} display='flex' justifyContent='space-between' alignItems='space-between' flexDirection='column' flexWrap='wrap' className={chipContainer}>\n        {categories\n          .sort((a, b) =>\n            CATEGORY_ORDER.indexOf(a) - CATEGORY_ORDER.indexOf(b)\n          )\n          .map(category =>\n            <Chip key={category}\n              icon={<LocalCafeIcon />}\n              label={category}\n              color={activeCategories.includes(category) ? 'primary' : 'default'}\n              onClick={() => handleCategoryClick(category)}\n              clickable\n            />\n          )}\n      </Box>\n      <List className={list}>\n        {\n          products\n            .filter((product: IProduct) => activeCategories.length > 0 ? activeCategories.includes(product.category) : true)\n            .sort((a, b) =>\n              CATEGORY_ORDER.indexOf(a.category) - CATEGORY_ORDER.indexOf(b.category)\n            )\n            .map((product: IProduct) => {\n              const selected = listItems.some(item => item.id === product.id)\n              const quantity = listItems.find(item => item.id === product.id)?.quantity\n              return (\n                <ListItem\n                  button\n                  // classes={{\n                  //   focusVisible: selected ? listItemChecked : ''\n                  // }}\n                  focusVisibleClassName={selected ? listItemChecked : ''}\n                  className={clsx(selected ? listItemChecked : '')}\n                  key={product.id}\n                  onTouchStart={handleTouchStart(product)}\n                  onTouchMove={handleTouchMove(product)}\n                  onTouchEnd={handleTouchEnd(product)}\n                  onMouseDown={handleMouseDown(product)}\n                  onMouseMove={handleMouseMove(product)}\n                  onMouseUp={handleMouseUp(product)}\n                >\n                  <ListItemIcon>\n                    <LocalCafeIcon />\n                  </ListItemIcon>\n                  <ListItemText className={listItemText} primary={product.name} secondary={selected ? quantity : ''} />{selected && <CheckIcon />}\n                </ListItem>\n              )\n            })\n        }\n      </List>\n    </Box>\n  )\n}\n\n","import { useRecoilState, useRecoilValue } from \"recoil\"\nimport { productsState } from \"./atoms\"\nimport { getProducts } from \"./client\"\nimport { IProduct, IShoppingItem } from \"./interfaces\"\nimport { listItemsState } from \"./selectors\"\n\n\nconst useProducts : () => [IProduct[], () => void] = () => {\n  const listItems = useRecoilValue(listItemsState)\n  const [products, setProducts] = useRecoilState(productsState)\n\n  const refetchProducts = () => {\n    getProducts()\n      .then(res => {\n        const newProducts: IProduct[] = res.data\n          .map(product => {\n            return ({\n              id: String(product.id),\n              name: product.product_name,\n              category: product.category,\n              selected: listItems.some(i => i.id === `${product.id}`)\n            })\n          })\n        setProducts(newProducts)\n      })\n  }\n\n  return [products, refetchProducts]\n}  \n\nexport default useProducts","import { useRecoilState } from \"recoil\"\nimport { shoppingListState } from \"./atoms\"\nimport { getShoppingLists } from \"./client\"\nimport { useEffect } from \"react\"\nimport { IShoppingList } from \"./interfaces\"\n\nconst useShoppingLists : () => [IShoppingList[], () => void ] = () => {\n  const [shoppingLists, setShoppingLists] = useRecoilState(shoppingListState) \n\n  const refetchShoppingLists = () => {\n    getShoppingLists()\n    .then((res) => setShoppingLists(res.data))\n  }\n\n  return [shoppingLists, refetchShoppingLists]\n}\n\nexport default useShoppingLists","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport ListItem from '@material-ui/core/ListItem'\nimport List from '@material-ui/core/List'\nimport { RouteComponentProps } from \"@reach/router\"\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport AddIcon from '@material-ui/icons/Add'\nimport ListIcon from '@material-ui/icons/List'\nimport { ListItemText } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { IShoppingList } from './interfaces'\nimport { Link } from '@reach/router'\nimport { postEvent, getShoppingLists, postNewProduct } from './client'\nimport { useRecoilValue, useRecoilState } from 'recoil'\nimport { shoppingListState } from './atoms'\nimport useProducts from './useProducts'\nimport useShoppingLists from './useShoppingLists'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  isDeleted: {\n    backgroundColor: theme.palette.secondary.dark,\n  }\n}));\n\ninterface MenuProps extends RouteComponentProps { }\n\nexport default function Menu(props: MenuProps) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n  const [dialogOpen, setDialogOpen] = React.useState(false);\n  const [deleteOpen, setDeleteOpen] = React.useState(false);\n  const [newProductOpen, handleNewProductOpen] = React.useState(false) \n  const [newListTitle, setNewListTitle] = React.useState('')\n  const [listToDelete, selectListToDelete] = React.useState('')\n  const [newProductName, setNewProductName ] = React.useState('')\n  const [newProductCategory, setNewProductCategory ] = React.useState('')\n  const [products, refetchProducts] = useProducts()\n  const [shoppingLists, refetchShoppingLists] = useShoppingLists()\n\n  const handleDialogOpen = () => setDialogOpen(true);\n  const handleDialogClose = () => setDialogOpen(false);\n  const handleDeleteOpen = () => setDeleteOpen(true);\n\n  const handleDeleteClose = () => {\n    setDeleteOpen(false);\n  };\n\n  const handleClick = () => {\n    setOpen(!open);\n  };\n\n  const handleNewList = async () => {\n    handleDialogClose()\n    if (!newListTitle.trim()) return;\n    setNewListTitle('')\n    const payload = {\n      type: 'list_added',\n      name: newListTitle,\n    }\n    await postEvent(payload);\n    return refetchShoppingLists()\n  }\n\n  const handleListDelete = async () => {\n    handleDeleteClose()\n    if (!listToDelete.trim()) return;\n    selectListToDelete('')\n    const payload = {\n      type: 'list_removed',\n      list_id: listToDelete\n    }\n    refetchShoppingLists()\n    await postEvent(payload);\n    return refetchShoppingLists()\n  }\n\n  const handleNewProduct = async () => {\n    handleNewProductOpen(false)\n    if (!newProductName.trim()) return;\n    if (!newProductCategory.trim()) return;\n    setNewProductName('')\n    setNewProductCategory('')\n    await postNewProduct({ newProductName, newProductCategory })\n    return refetchProducts() \n  }\n\n  return (\n    <Box className={classes.root}>\n      <List component=\"nav\" aria-label=\"main mailbox folders\">\n        <ListItem button>\n          <ListItemIcon>\n            <AddIcon />\n          </ListItemIcon>\n          <ListItemText onClick={handleDialogOpen} primary=\"Neuer Einkaufszettel\" />\n        </ListItem>\n        <ListItem button onClick={handleClick}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Einkaufslisten\" />\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </ListItem>\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\n          <List component=\"div\" disablePadding>\n            {\n              shoppingLists.map(list => {\n                return (\n                  <ListItem key={list.id} component={Link} to={`/list/${list.id}`} button className={classes.nested}>\n                    <ListItemIcon>\n                      <StarBorder />\n                    </ListItemIcon>\n                    <ListItemText primary={list.name} />\n                  </ListItem>\n                )\n              })\n            }\n          </List>\n        </Collapse>\n      </List>\n      <Divider />\n      <List component=\"nav\" aria-label=\"secondary mailbox folders\">\n        <ListItem button>\n          <ListItemText onClick={handleDeleteOpen} primary=\"Löschen\" />\n        </ListItem>\n        <ListItem button>\n          <ListItemText onClick={() => handleNewProductOpen(true)} primary=\"Neues Produkt\" />\n        </ListItem>\n      </List>\n      <Dialog open={dialogOpen} onClose={handleDialogClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Neue Liste</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Bitte gib den Namen deiner Einkaufsliste ein.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            value={newListTitle}\n            label=\"Name\"\n            type=\"name\"\n            fullWidth\n            onChange={(event) => setNewListTitle(event.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDialogClose} color=\"primary\">\n            Zurück\n          </Button>\n          <Button onClick={handleNewList} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={deleteOpen} onClose={handleDeleteClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Liste löschen</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Welche Liste möchtest du löschen?\n          </DialogContentText>\n          <List>\n            {shoppingLists.map(list => {\n              const isDeleted = listToDelete === list.id\n              return (\n                <ListItem key={list.id} onClick={() => selectListToDelete(list.id)} button className={isDeleted ? classes.isDeleted : ''}>\n                  <ListItemIcon>\n                    <StarBorder />\n                  </ListItemIcon>\n                  <ListItemText primary={list.name} />\n                </ListItem>\n              )\n            })\n            }\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDeleteClose} color=\"primary\">\n            Zurück\n          </Button>\n          <Button onClick={handleListDelete} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={newProductOpen} onClose={handleNewProductOpen} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Neues Produkt</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Bitte gib den Namen des neuen Produkts ein.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            value={newProductName}\n            label=\"Name\"\n            type=\"name\"\n            fullWidth\n            onChange={(event) => setNewProductName(event.target.value)}\n          />\n          <DialogContentText>\n            Bitte gib die Kategorie des neuen Produkts an\n          </DialogContentText>\n          <Select \n            id='category'\n            value={newProductCategory}\n            onChange={(evt) =>\n              { \n                const category = evt.target.value as string\n                setNewProductCategory(category)\n            }}\n          >\n            <MenuItem value='TK'>TK</MenuItem>\n            <MenuItem value='Backwaren'>Backwaren</MenuItem>\n            <MenuItem value='Kühlwaren'>Kühlwaren</MenuItem>\n            <MenuItem value='Getränke'>Getränke</MenuItem>\n            <MenuItem value='Trockenware'>Trockenware</MenuItem>\n            <MenuItem value='Obst & Gemüse'>Obst & Gemüse</MenuItem>\n            <MenuItem value='Drogerie'>Drogerie</MenuItem>\n            <MenuItem value='Snacks'>Snacks</MenuItem>\n          </Select>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleNewProductOpen(false)} color=\"primary\">\n            Zurück\n          </Button>\n          <Button onClick={handleNewProduct} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  )\n}\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Box from '@material-ui/core/Box'\nimport { navigate } from '@reach/router'\n\nconst useStyles = makeStyles((theme) => ({\n\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function Navbar() {\n  const classes = useStyles()\n\n  return (\n    <Box flexGrow={1} >\n      <AppBar position=\"static\">\n        <Toolbar>\n             <IconButton onClick={() => navigate('/menu')} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" >\n              <MenuIcon />\n             </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Einkaufsliste\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </Box>\n      )\n} ","import React from 'react'\nimport { Router } from '@reach/router'\nimport ShoppingList from './ShoppingList'\nimport ListConfig from './ListConfig'\nimport Menu from './Menu'\nimport Navbar from './Navbar'\nimport { IShoppingItem, IShoppingList, IProduct } from './interfaces'\nimport Box from '@material-ui/core/Box'\nimport { makeStyles } from '@material-ui/core'\n\ninterface AppPageProps { }\n\nconst useStyles = makeStyles(() => ({\n    page: {\n        boxSizing: 'border-box',\n        margin: '0',\n        padding: '0',\n        maxHeight: '100vh',\n        position: 'relative',\n        paddingBottom: '10vh'\n    }\n}))\n\nexport default function AppPage(props: AppPageProps) {\n    const { page } = useStyles()\n    return (\n        <Box className={page}>\n            <Navbar />\n            <Router >\n                <ShoppingList path=\"/list/:id\" />\n                <ListConfig path=\"/list/:id/edit\" />\n                <Menu  path=\"/menu\" />\n            </Router>\n        </Box>\n    )\n}","import React from 'react';\nimport { useEffect } from 'react'\nimport { ThemeProvider, createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\nimport AppPage from './AppPage'\nimport './App.css';\nimport useProducts from './useProducts';\nimport useListItems from './useListItems';\nimport useShoppingLists from './useShoppingLists';\n\nlet theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#57DBBE',\n      light: '#80FFE3'\n    },\n    secondary: {\n      main: '#915540',\n      light: '#DF9379'\n    }\n  },\n  typography: {\n    fontFamily: \n      `\n      Roboto Mono,\n      Roboto,\n      sans-serif\n      `\n  }\n})\ntheme = responsiveFontSizes(theme)\n\n\nfunction App() {\n  const [products, refetchProducts] = useProducts()\n  const [shoppingLists ,refetchShoppingLists ] = useShoppingLists()\n  useListItems()\n\n  useEffect(() => {\n    refetchProducts()\n    refetchShoppingLists()\n  },[])\n\n\n  return (\n    <ThemeProvider theme={theme}>\n      <AppPage />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { RecoilRoot } from 'recoil'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n    <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}