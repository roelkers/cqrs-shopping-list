{"version":3,"sources":["client.ts","ShoppingList.tsx","ListConfig.tsx","Menu.tsx","Navbar.tsx","AppPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["BASE_API","process","postEvent","event","fetch","method","body","JSON","stringify","headers","useStyles","makeStyles","theme","listItemChecked","background","palette","secondary","light","textDecoration","listItem","primary","list","overflow","maxHeight","ShoppingList","props","listItems","listId","setListId","useEffect","id","Box","p","align","display","component","Link","to","List","className","map","item","ListItem","onClick","checkListItem","payload","list_id","product_id","type","checked","handleClick","key","clsx","button","ListItemIcon","ListItemText","name","chipContainer","overflowX","Menu","products","useState","activeCategories","setCategories","categories","Array","from","Set","category","justifyContent","Chip","icon","label","color","includes","console","log","updatedCategories","filter","c","handleCategoryClick","clickable","product","length","selected","some","root","width","maxWidth","backgroundColor","paper","nested","paddingLeft","spacing","isDeleted","dark","classes","React","open","setOpen","dialogOpen","setDialogOpen","deleteOpen","setDeleteOpen","newListTitle","setNewListTitle","listToDelete","selectListToDelete","handleDialogClose","handleDeleteClose","aria-label","Collapse","in","timeout","unmountOnExit","disablePadding","shoppingLists","Divider","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","value","fullWidth","onChange","target","DialogActions","Button","trim","menuButton","marginRight","title","flexGrow","Navbar","AppBar","position","Toolbar","IconButton","navigate","edge","Typography","variant","page","padding","AppPage","path","createMuiTheme","main","typography","fontFamily","responsiveFontSizes","App","Map","listData","setListItems","listening","setListening","setShoppingLists","setProducts","eventSource","EventSource","onmessage","a","parsedData","parse","data","jsonResponse","Response","Object","entries","window","caches","cache","put","catch","e","onerror","error","match","json","jsonData","get","then","res","newProducts","String","product_name","i","ThemeProvider","newItems","updatedMap","set","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","document","getElementById","URL","href","origin","addEventListener","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.11beba5e.chunk.js","sourcesContent":["import { IApiProduct } from \"./interfaces\"\n\nconst BASE_API = process.env.REACT_APP_BASE_URL\n\nexport const postEvent = (event: any) => {\n    fetch(`${BASE_API}/events`, {\n        method: 'POST',\n        body: JSON.stringify(event),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })\n}\n\nexport const createEventSource = () => new EventSource(`${BASE_API}/list-data`)\n\nexport const getShoppingLists = () => fetch(`${BASE_API}/lists`).then((res)=> res.json())\n\nexport const getProducts = () : Promise<{ data: IApiProduct[] }> => fetch(`${BASE_API}/products`).then((res)=> res.json())\n","import React, { useEffect } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IShoppingItem } from './interfaces'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport { postEvent } from './client'\n\ninterface ShoppingListProps extends RouteComponentProps {\n  listItems: IShoppingItem[];\n  listId: string;\n  id?: string\n  setListId: (id: string) => void\n  checkListItem: (id: string) => void\n}\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!,\n      textDecoration: 'line-through'\n    },\n    listItem: {\n      \"&:hover, &.Mui-focusVisible\": { background: theme.palette.primary.light! }\n    },\n    list: {\n      overflow: 'auto',\n      maxHeight: 'calc(100vh - 117px)'\n    }\n  })\n});\n\nexport default function ShoppingList(props: ShoppingListProps) {\n  const { listItems, listId, setListId } = props\n  const { listItem, listItemChecked, list } = useStyles()\n\n  useEffect(() => {\n    //check if list id from route is the same as current list id,\n    //if not then change it to the currently selected\n    if (props.id && props.id !== listId) setListId(props.id)\n  }, [listId, setListId, props.id])\n\n  const handleClick = (item: IShoppingItem) => {\n    props.checkListItem(item.id)\n    const payload = {\n      list_id: props.listId,\n      product_id: item.id,\n      type: ''\n    }\n    if (item.checked) {\n      payload.type = 'item_unchecked'\n    } else {\n      payload.type = 'item_checked'\n    }\n    return postEvent(payload);\n  }\n\n  return (\n    <Box>\n      <Box p={2}>\n        <MuiLink align='center' display='block' component={Link} to='edit'>Bearbeiten</MuiLink>\n      </Box>\n      <List className={list}>\n        {\n          listItems.map((item) => {\n            return (\n              <ListItem onClick={() => handleClick(item)} key={item.id} className={clsx(listItem, item.checked ? listItemChecked : '')} button>\n                <ListItemIcon>\n                  <LocalCafeIcon />\n                </ListItemIcon>\n                <ListItemText primary={item.name} />\n              </ListItem>\n            )\n          })\n        }\n      </List>\n    </Box>\n  )\n}","import React, { useState } from 'react'\nimport Box from '@material-ui/core/Box'\nimport { RouteComponentProps, Link } from \"@reach/router\"\nimport { IShoppingItem, IProduct } from './interfaces'\nimport { postEvent } from './client'\nimport ListItem from '@material-ui/core/ListItem'\nimport MuiLink from '@material-ui/core/Link'\nimport List from '@material-ui/core/List'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport CheckIcon from '@material-ui/icons/Check'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe'\nimport Chip from '@material-ui/core/Chip'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\n\ninterface MenuProps extends RouteComponentProps {\n  listItems: IShoppingItem[],\n  listId: string,\n  products: IProduct[]\n}\n\nconst useStyles = makeStyles((theme) => {\n  return ({\n    listItemChecked: {\n      background: theme.palette.secondary.light!\n    },\n    listItem: {\n      \"&:hover, &.Mui-focusVisible\": { background: theme.palette.primary.light! }\n    },\n    chipContainer: {\n      overflowX: 'auto',\n    },\n    list: {\n      overflow: 'auto',\n      maxHeight: 'calc(100vh - 135px)'\n    }\n  })\n});\n\nexport default function Menu(props: MenuProps) {\n  const { listItems, products } = props\n  const { listItem, listItemChecked, chipContainer, list } = useStyles()\n  const [activeCategories, setCategories] = useState<string[]>([])\n\n  const handleClick = (product: IProduct) => {\n    const payload = {\n      list_id: props.listId,\n      product_id: product.id,\n      type: ''\n    }\n    if (product.selected) {\n      payload.type = 'item_removed'\n    } else {\n      payload.type = 'item_added'\n    }\n    return postEvent(payload);\n  }\n\n  const handleCategoryClick = (category: string) => {\n    console.log(category)\n    const updatedCategories = activeCategories.includes(category) ? activeCategories.filter(c => c !== category) : [...activeCategories, category]\n    console.log(updatedCategories)\n    return setCategories(updatedCategories)\n  }\n  const categories = Array.from(new Set(products.map(p => p.category)))\n\n  return (\n    <Box>\n      <Box p={2}>\n        <MuiLink align='center' display='block' component={Link} to={`/list/${props.listId}`}>Fertig</MuiLink>\n      </Box>\n      <Box p={1} display='flex' justifyContent='flex-start' className={chipContainer}>\n        {categories.map(category =>\n          <Chip key={category}\n            icon={<LocalCafeIcon />}\n            label={category}\n            color={activeCategories.includes(category) ? 'primary' : 'default'}\n            onClick={() => handleCategoryClick(category)}\n            clickable\n          />\n        )}\n      </Box>\n      <List className={list}>\n        {\n          products\n            .filter((product: IProduct) => activeCategories.length > 0 ? activeCategories.includes(product.category) : true)\n            .map((product: IProduct) => {\n              const selected = listItems.some(item => item.id === product.id)\n              return (\n                <ListItem onClick={() => handleClick(product)} className={clsx(listItem, selected ? listItemChecked : '')} key={product.id} button>\n                  <ListItemIcon>\n                    <LocalCafeIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={product.name} />{selected && <CheckIcon />}\n                </ListItem>\n              )\n            })\n        }\n      </List>\n    </Box>\n  )\n}\n\n","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport ListItem from '@material-ui/core/ListItem'\nimport List from '@material-ui/core/List'\nimport { RouteComponentProps } from \"@reach/router\"\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport AddIcon from '@material-ui/icons/Add'\nimport ListIcon from '@material-ui/icons/List'\nimport { ListItemText } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { IShoppingList } from './interfaces'\nimport { Link } from '@reach/router'\nimport { postEvent } from './client'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  isDeleted: {\n    backgroundColor: theme.palette.secondary.dark,\n  }\n}));\n\ninterface MenuProps extends RouteComponentProps {\n  shoppingLists: IShoppingList[],\n}\n\nexport default function Menu(props: MenuProps) {\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n  const [dialogOpen, setDialogOpen] = React.useState(false);\n  const [deleteOpen, setDeleteOpen] = React.useState(false);\n  const [newListTitle, setNewListTitle] = React.useState('')\n  const [listToDelete, selectListToDelete] = React.useState('')\n\n  const handleDialogOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleDialogClose = () => {\n    setDialogOpen(false);\n  };\n\n  const handleDeleteOpen = () => {\n    setDeleteOpen(true);\n  };\n\n  const handleDeleteClose = () => {\n    setDeleteOpen(false);\n  };\n\n  const handleClick = () => {\n    setOpen(!open);\n  };\n\n  const handleNewList = () => {\n    handleDialogClose()\n    if (!newListTitle.trim()) return;\n    setNewListTitle('')\n    const payload = {\n      type: 'list_added',\n      name: newListTitle,\n    }\n    return postEvent(payload);\n  }\n\n  const handleListDelete = () => {\n    handleDialogClose()\n    if (!listToDelete.trim()) return;\n    selectListToDelete('')\n    const payload = {\n      type: 'list_removed',\n      list_id: listToDelete\n    }\n    return postEvent(payload);\n  }\n\n  return (\n    <Box className={classes.root}>\n      <List component=\"nav\" aria-label=\"main mailbox folders\">\n        <ListItem button>\n          <ListItemIcon>\n            <AddIcon />\n          </ListItemIcon>\n          <ListItemText onClick={handleDialogOpen} primary=\"Neuer Einkaufszettel\" />\n        </ListItem>\n        <ListItem button onClick={handleClick}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Einkaufslisten\" />\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </ListItem>\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\n          <List component=\"div\" disablePadding>\n            {\n              props.shoppingLists.map(list => {\n                return (\n                  <ListItem key={list.id} component={Link} to={`/list/${list.id}`} button className={classes.nested}>\n                    <ListItemIcon>\n                      <StarBorder />\n                    </ListItemIcon>\n                    <ListItemText primary={list.name} />\n                  </ListItem>\n                )\n              })\n            }\n          </List>\n        </Collapse>\n      </List>\n      <Divider />\n      <List component=\"nav\" aria-label=\"secondary mailbox folders\">\n        <ListItem button>\n          <ListItemText onClick={handleDeleteOpen} primary=\"Löschen\" />\n        </ListItem>\n      </List>\n      <Dialog open={dialogOpen} onClose={handleDialogClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Neue Liste</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Bitte gib den Namen deiner Einkaufsliste ein.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            value={newListTitle}\n            label=\"Name\"\n            type=\"name\"\n            fullWidth\n            onChange={(event) => setNewListTitle(event.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDialogClose} color=\"primary\">\n            Zurück\n          </Button>\n          <Button onClick={handleNewList} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={deleteOpen} onClose={handleDeleteClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Liste löschen</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Welche Liste möchtest du löschen?\n          </DialogContentText>\n          <List>\n            {props.shoppingLists.map(list => {\n              const isDeleted = listToDelete === list.id\n              return (\n                <ListItem key={list.id} onClick={() => selectListToDelete(list.id)} button className={isDeleted ? classes.isDeleted : ''}>\n                  <ListItemIcon>\n                    <StarBorder />\n                  </ListItemIcon>\n                  <ListItemText primary={list.name} />\n                </ListItem>\n              )\n            })\n            }\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDeleteClose} color=\"primary\">\n            Zurück\n          </Button>\n          <Button onClick={handleListDelete} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  )\n}\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Box from '@material-ui/core/Box'\nimport { navigate } from '@reach/router'\n\nconst useStyles = makeStyles((theme) => ({\n\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function Navbar() {\n  const classes = useStyles()\n\n  return (\n    <Box flexGrow={1} >\n      <AppBar position=\"static\">\n        <Toolbar>\n             <IconButton onClick={() => navigate('/menu')} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" >\n              <MenuIcon />\n             </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Einkauf-App\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </Box>\n      )\n} ","import React from 'react'\nimport { Router } from '@reach/router'\nimport ShoppingList from './ShoppingList'\nimport ListConfig from './ListConfig'\nimport Menu from './Menu'\nimport Navbar from './Navbar'\nimport { IShoppingItem, IShoppingList, IProduct } from './interfaces'\nimport Box from '@material-ui/core/Box'\nimport { makeStyles } from '@material-ui/core'\n\ninterface AppPageProps {\n    listItems: IShoppingItem[],\n    products: IProduct[],\n    listId: string,\n    setListId: (id: string) => void,\n    shoppingLists: IShoppingList[],\n    checkListItem: (id: string) => void\n}\n\nconst useStyles = makeStyles(() => ({\n    page: {\n        margin: '0',\n        padding: '0',\n        maxHeight: '100vh',\n        overflow: 'hidden',\n        position: 'relative'\n    }\n}))\n\nexport default function AppPage(props: AppPageProps) {\n    const { page } = useStyles()\n    return (\n        <Box className={page}>\n            <Navbar />\n            <Router >\n                <ShoppingList listId={props.listId} listItems={props.listItems} checkListItem={props.checkListItem} setListId={props.setListId} path=\"/list/:id\" />\n                <ListConfig products={props.products} listId={props.listId} listItems={props.listItems} path=\"/list/:id/edit\" />\n                <Menu shoppingLists={props.shoppingLists} path=\"/menu\" />\n            </Router>\n        </Box>\n    )\n}","import React from 'react';\nimport { useEffect, useState } from 'react'\nimport { ThemeProvider, createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\nimport AppPage from './AppPage'\nimport './App.css';\nimport { createEventSource, getShoppingLists, getProducts } from './client';\nimport { IShoppingItem, IShoppingList, IProduct } from './interfaces';\n\nlet theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#57DBBE',\n      light: '#80FFE3'\n    },\n    secondary: {\n      main: '#915540',\n      light: '#DF9379'\n    }\n  },\n  typography: {\n    fontFamily: \n      `\n      Roboto Mono,\n      Roboto,\n      sans-serif\n      `\n  }\n})\ntheme = responsiveFontSizes(theme)\n\n\nfunction App() {\n  const [listData, setListItems] = useState<Map<string,IShoppingItem[]>>(new Map());\n  const [listening, setListening] = useState(false);\n  const [listId, setListId ] = useState('1')\n  const [shoppingLists, setShoppingLists] = React.useState<IShoppingList[]>([])\n  const [products, setProducts] = useState<IProduct[]>([])\n  \n  useEffect(() => {\n    if (!listening) {\n      const eventSource = createEventSource() \n      eventSource.onmessage = async (event) => {\n        const parsedData = JSON.parse(event.data) as any\n        const jsonResponse = new Response(event.data, {\n          headers: {\n            'content-type': 'application/json'\n          }\n        })\n        const map = new Map(Object.entries(parsedData))\n        setListItems(map);\n        //update cache if we have access to it\n        if(window.caches) {\n          const cache = await window.caches.open('shoppinglist')\n          await cache.put(`/events/${listId}`, jsonResponse ).catch(e => console.log(e))\n        }\n      };\n      eventSource.onerror = async (error) => {\n        //use cache if we have access to it\n        if(window.caches) {\n          const data = await window.caches.match(`/events/${listId}`)\n          const jsonData = await data?.json()\n          const map = new Map(Object.entries(jsonData))\n          setListItems(map);\n        }\n      }\n      \n      setListening(true);\n    }\n  }, [listening, listData, listId]);\n\n  const listItems = listData.get(listId) || [] as IShoppingItem[]\n\n  useEffect(() => {\n    getShoppingLists()\n    .then((res) => setShoppingLists(res.data))\n  },[])\n\n  useEffect(() => {\n    getProducts()\n    .then(res => {\n      const newProducts: IProduct[] = res.data\n      .map(product => {\n        return ({\n          id: String(product.id),\n          name: product.product_name,\n          category: product.category,\n          selected: listItems.some(i => i.id === `${product.id}`)\n        })\n      })\n      setProducts(newProducts)      \n    })\n  },[])\n\n  const checkListItem = (id: string) => {\n    const newItems = listItems.map(item => item.id === id ? ({ ...item, checked: !item.checked }) : item)\n    const updatedMap = listData.set(listId,newItems) \n    setListItems(updatedMap)\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <AppPage products={products} shoppingLists={shoppingLists} listId={listId} setListId={setListId} listItems={listItems} checkListItem={checkListItem} />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}